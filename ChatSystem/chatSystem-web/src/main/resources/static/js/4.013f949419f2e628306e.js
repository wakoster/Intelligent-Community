webpackJsonp([4],{blNG:function(s,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={components:{message:o("AVWw").a},name:"UserInfo",data:function(){return{userInfo:{userImg:null,mailbox:null,address:null,sign:null},password:{oldPassword:null,newPassword:null,newPasswordAgain:null}}},mounted:function(){this.selectInformation()},methods:{activeLink:function(s){document.querySelectorAll(".inputBox.active").forEach(function(s){return s.classList.remove("active")}),s.path[1].className+=" active"},clearActive:function(s){document.querySelectorAll(".inputBox.active").forEach(function(s){return s.classList.remove("active")})},clearBaseInformation:function(){this.userInfo.userImg=null,this.userInfo.mailbox=null,this.userInfo.phoneNumber=null,this.userInfo.address=null,this.userInfo.sign=null},clearPassword:function(){this.password.oldPassword=null,this.password.newPassword=null,this.password.newPasswordAgain=null},userImgUpload:function(s){var e=s.target.files[0];if(void 0===e)return null;if("image"!==e.type.split("/")[0])return this.showErrorMessage("请上传正确的图片文件"),null;if(e.size>1048576)return this.showErrorMessage("文件大小超出限制"),null;var o=this,t=new FileReader;t.readAsDataURL(e),t.onload=function(){o.userInfo.userImg=this.result}},changeInformation:function(){var s=this;this.$axios.post("/user/changeInformation",{phoneNumber:this.$cookies.get("cookie_userPhoneNumber"),userImg:this.userInfo.userImg,mailbox:this.userInfo.mailbox,address:this.userInfo.address,sign:this.userInfo.sign}).then(function(e){var o=e.data;0===o.code?(s.showInfoMessage("修改成功"),s.selectInformation()):s.showErrorMessage(o.msg)}).catch(function(e){s.showErrorMessage(e)})},changePassword:function(){var s=this;this.$axios.post("/user/changePassword",{phoneNumber:this.$cookies.get("cookie_userPhoneNumber"),oldPassword:this.$md5(this.password.oldPassword+"KEY"),newPassword:this.password.newPassword}).then(function(e){var o=e.data;0===o.code?(s.showInfoMessage("修改成功"),s.clearPassword()):s.showErrorMessage(o.msg)}).catch(function(e){s.showErrorMessage(e)})},selectInformation:function(){var s=this;this.$axios.post("/user/selectInformation",{phoneNumber:this.$cookies.get("cookie_userPhoneNumber")}).then(function(e){var o=e.data;0===o.code?s.userInfo=o.data:s.showErrorMessage(o.msg)}).catch(function(e){s.showErrorMessage(e)})},showErrorMessage:function(s){this.$refs.message.setErrorMessage(s)},showInfoMessage:function(s){this.$refs.message.setInfoMessage(s)}}},n={render:function(){var s=this,e=s.$createElement,o=s._self._c||e;return o("div",{staticClass:"userInfo"},[o("div",{staticClass:"information"},[o("label",[s._v("基本信息")]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("上传头像:")]),s._v(" "),o("div",{staticClass:"updateImgBox",class:{active:null!==s.userInfo.userImg}},[null!==s.userInfo.userImg?o("img",{staticClass:"preview",attrs:{src:s.userInfo.userImg}}):s._e(),s._v(" "),null===s.userInfo.userImg?o("label",{attrs:{for:"upload"}},[s._v("上传")]):s._e(),s._v(" "),o("input",{ref:"upload",staticClass:"upload",attrs:{id:"upload",type:"file"},on:{change:function(e){return s.userImgUpload(e)}}}),s._v(" "),null!==s.userInfo.userImg?o("div",{staticClass:"clearImg-box"},[o("div",{staticClass:"clearImg",on:{click:function(e){s.userInfo.userImg=null,s.$refs.upload.value=null}}},[o("span",{staticClass:"iconfont"},[s._v("")])])]):s._e()]),s._v(" "),o("div",{staticClass:"reminder"},[s._v("图片大小请限制在1M以下")])]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("邮箱地址:")]),s._v(" "),o("div",{staticClass:"inputBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.mailbox,expression:"userInfo.mailbox"}],attrs:{type:"email",placeholder:"请填写邮箱以接受系统邮件"},domProps:{value:s.userInfo.mailbox},on:{focus:function(e){return s.activeLink(e)},blur:function(e){return s.clearActive()},input:function(e){e.target.composing||s.$set(s.userInfo,"mailbox",e.target.value)}}})])]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("所在地区:")]),s._v(" "),o("div",{staticClass:"inputBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.address,expression:"userInfo.address"}],attrs:{type:"text",placeholder:"请填写所在地区"},domProps:{value:s.userInfo.address},on:{focus:function(e){return s.activeLink(e)},blur:function(e){return s.clearActive()},input:function(e){e.target.composing||s.$set(s.userInfo,"address",e.target.value)}}})])]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("个人签名:")]),s._v(" "),o("div",{staticClass:"inputBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.sign,expression:"userInfo.sign"}],attrs:{type:"text",placeholder:"请填写个人签名"},domProps:{value:s.userInfo.sign},on:{focus:function(e){return s.activeLink(e)},blur:function(e){return s.clearActive()},input:function(e){e.target.composing||s.$set(s.userInfo,"sign",e.target.value)}}})])]),s._v(" "),o("button",{staticClass:"button",attrs:{type:"submit"},on:{click:s.changeInformation}},[s._v("提交修改")]),s._v(" "),o("div",{staticClass:"line"}),s._v(" "),o("label",[s._v("密码设置")]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("旧密码:")]),s._v(" "),o("div",{staticClass:"inputBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.password.oldPassword,expression:"password.oldPassword"}],attrs:{type:"password",placeholder:"请输入原密码"},domProps:{value:s.password.oldPassword},on:{focus:function(e){return s.activeLink(e)},blur:function(e){return s.clearActive()},input:function(e){e.target.composing||s.$set(s.password,"oldPassword",e.target.value)}}})])]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("新密码:")]),s._v(" "),o("div",{staticClass:"inputBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.password.newPassword,expression:"password.newPassword"}],attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:s.password.newPassword},on:{focus:function(e){return s.activeLink(e)},blur:function(e){return s.clearActive()},input:function(e){e.target.composing||s.$set(s.password,"newPassword",e.target.value)}}})])]),s._v(" "),o("div",{staticClass:"informationBox"},[o("div",[s._v("确认新密码:")]),s._v(" "),o("div",{staticClass:"inputBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.password.newPasswordAgain,expression:"password.newPasswordAgain"}],attrs:{type:"password",placeholder:"请确认新密码"},domProps:{value:s.password.newPasswordAgain},on:{focus:function(e){return s.activeLink(e)},blur:function(e){return s.clearActive()},input:function(e){e.target.composing||s.$set(s.password,"newPasswordAgain",e.target.value)}}})]),s._v(" "),o("div",{staticClass:"errorMessage",class:{active:s.password.newPassword===s.password.newPasswordAgain}},[s._v("两次输入不一致")])]),s._v(" "),o("button",{staticClass:"button",attrs:{type:"submit"},on:{click:s.changePassword}},[s._v("修改密码")])]),s._v(" "),o("message",{ref:"message"})],1)},staticRenderFns:[]};var a=o("VU/8")(t,n,!1,function(s){o("kZDw")},"data-v-08852d00",null);e.default=a.exports},kZDw:function(s,e){}});
//# sourceMappingURL=4.013f949419f2e628306e.js.map