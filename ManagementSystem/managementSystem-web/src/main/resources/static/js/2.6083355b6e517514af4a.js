webpackJsonp([2],{DwEe:function(a,t){},I4En:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("V7I0"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"loading"},[t("div",{staticClass:"loader-inner ball-beat"},[t("div"),this._v(" "),t("div"),this._v(" "),t("div")])])}]};var s=e("VU/8")({name:"Loading"},i,!1,function(a){e("DwEe")},"data-v-01a5beff",null).exports,o={components:{errorMessage:n.a,Loading:s},name:"installationPackageManagement",data:function(){return{uploadLoading:!1,pageTagInfo:{id:null,installationPackageId:null,img:null,code:null,title:null,url:null,description:null,information:null,sort:null},pageTagSort:{},updateNow:{name:"chatSystem",type:"正在安装",time:"2022-02-14 10:28",schedule:66},operatingRecord:{},operatingRecordRows:10,installationPackage:{},installationPackageScreeningCondition:{state:null,sign:null}}},mounted:function(){this.initialize()},methods:{initialize:function(){this.getInstallationPackage(),this.getOperatingRecord(),this.getPageTagSort()},changeInstallationPackageScreeningCondition:function(a,t){this.installationPackageScreeningCondition.state=a,this.installationPackageScreeningCondition.sign=t},getInstallationPackage:function(){var a=this;this.$axios.get("/installationPackage/getAllInstallationPackage").then(function(t){var e=t.data;0===e.code?a.installationPackage=e:a.showErrorMessage(e.msg)}).catch(function(t){a.showErrorMessage(t)})},getOperatingRecord:function(){var a=this,t="/installationPackage/selectOperatingRecord?rows="+this.operatingRecordRows;this.$axios.get(t).then(function(t){var e=t.data;0===e.code?(a.operatingRecord=e,e.data.length<a.operatingRecordRows?document.querySelector(".more").classList.add("hidden"):a.operatingRecordRows+=10):a.showErrorMessage(e.msg)}).catch(function(t){a.showErrorMessage(t)})},sign:function(a,t){var e=this;this.$axios.post("/installationPackage/changeSignInfo",{installationPackageId:a.id,sign:!a.sign}).then(function(a){var n=a.data;0===n.code?e.installationPackage.data[t].sign=!e.installationPackage.data[t].sign:e.showErrorMessage(n.msg)}).catch(function(a){e.showErrorMessage(a)})},deleteOperatingRecord:function(a,t){var e=this;this.$axios.post("/installationPackage/deleteOperatingRecord",{id:a.id}).then(function(a){var n=a.data;0===n.code?e.operatingRecord.data.splice(t,1):e.showErrorMessage(n.msg)}).catch(function(a){e.showErrorMessage(a)})},getPageTagSort:function(){var a=this;this.$axios.get("/pageTag/getPageTagSort").then(function(t){var e=t.data;0===e.code?a.pageTagSort=e:a.showErrorMessage(e.msg)}).catch(function(t){a.showErrorMessage(t)})},uploadInstallationPackage:function(a){var t=this,e=a.target.files[0];if(void 0===e)return null;if("jar"!==e.name.split(".")[e.name.split(".").length-1])return this.showErrorMessage("请上传正确的jar包"),null;var n=new FormData;n.append("installationPackage",e),this.uploadLoading=!0,this.$axios.post("/installationPackage/uploadInstallationPackage",n).then(function(a){var e=a.data;0!==e.code&&t.showErrorMessage(e.msg)}).catch(function(a){t.showErrorMessage(a)}).finally(function(){a.target.value=null,t.uploadLoading=!1,t.getInstallationPackage()})},deleteInstallationPackage:function(a,t){var e=this;this.$axios.post("/installationPackage/deleteInstallationPackage",{id:a.id}).then(function(a){var n=a.data;0===n.code?e.installationPackage.data.splice(t,1):e.showErrorMessage(n.msg)}).catch(function(a){e.showErrorMessage(a)})},pageTagInfoImgUpload:function(a){var t=a.target.files[0];if(void 0===t)return null;if("image"!==t.type.split("/")[0])return this.showErrorMessage("请上传正确的图片文件"),null;if(t.size>1048576)return this.showErrorMessage("文件大小超出限制"),null;var e=this,n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.pageTagInfo.img=this.result}},openPageTagInfo:function(a){var t=this;this.pageTagInfo.installationPackageId=a.id,this.on_off_configuration(),null!==a.pageTagInfoId&&(this.uploadLoading=!0,this.pageTagInfo.id=a.pageTagInfoId,this.$axios.post("/pageTag/getPageTagById",{id:a.pageTagInfoId}).then(function(a){var e=a.data;0===e.code?(console.log(e),t.pageTagInfo.id=e.data.id,t.pageTagInfo.img=e.data.img,t.pageTagInfo.code=e.data.code,t.pageTagInfo.title=e.data.title,t.pageTagInfo.url=e.data.url,t.pageTagInfo.description=e.data.description,t.pageTagInfo.information=e.data.information,t.pageTagInfo.sort=e.data.sort):(t.showErrorMessage(e.msg),t.closePageTagInfo())}).catch(function(a){t.showErrorMessage(a),t.closePageTagInfo()}).finally(function(){t.uploadLoading=!1}))},submitPageTagInfo:function(){var a=this;this.uploadLoading=!0,this.$axios.post("/pageTag/setPageTagInfo",this.pageTagInfo).then(function(t){var e=t.data;0===e.code?(a.closePageTagInfo(),a.initialize()):a.showErrorMessage(e.msg)}).catch(function(t){a.showErrorMessage(t)}).finally(function(){a.uploadLoading=!1})},closePageTagInfo:function(){this.pageTagInfo.id=null,this.pageTagInfo.installationPackageId=null,this.pageTagInfo.img=null,this.pageTagInfo.code=null,this.pageTagInfo.title=null,this.pageTagInfo.url=null,this.pageTagInfo.description=null,this.pageTagInfo.information=null,this.pageTagInfo.sort=null,this.on_off_configuration()},on_off_configuration:function(){document.querySelector(".configuration .pop").classList.toggle("active"),document.querySelector(".configuration .mask").classList.toggle("active")},formatDate:function(a){return function(a,t){if(!a)return"";a=a&&13!==a.length?parseInt(a*Math.pow(10,13-a.length)):parseInt(a);var e=new Date(a),n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}(a.toString(),"yyyy-MM-dd hh:mm:ss")},showErrorMessage:function(a){this.$refs.errorMessage.setErrorMessage(a)}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"installationPackageManagement"},[e("div",{staticClass:"header"},[a._m(0),a._v(" "),e("div",{staticClass:"navigator"},[e("ul",{staticClass:"navList"},[e("li",[e("div",{on:{click:function(t){return a.changeInstallationPackageScreeningCondition(null,null)}}},[a._v("全部")])]),a._v(" "),e("li",[e("div",{on:{click:function(t){return a.changeInstallationPackageScreeningCondition("已安装",null)}}},[a._v("已安装")])]),a._v(" "),e("li",[e("div",{on:{click:function(t){return a.changeInstallationPackageScreeningCondition("未安装",null)}}},[a._v("未安装")])]),a._v(" "),e("li",[e("div",{on:{click:function(t){return a.changeInstallationPackageScreeningCondition(null,!0)}}},[a._v("标记")])]),a._v(" "),e("li",[e("div",{staticClass:"upload-box"},[e("label",{attrs:{for:"upload"}},[a._v("上传")]),a._v(" "),e("input",{ref:"upload",staticClass:"upload",attrs:{id:"upload",type:"file",onclick:"this.uploadLoading = true"},on:{change:function(t){return a.uploadInstallationPackage(t)}}})])])])])]),a._v(" "),e("div",{staticClass:"box"},[e("div",{staticClass:"left-box"},[e("div",{staticClass:"installationPackage"},a._l(a.installationPackage.data,function(t,n){return e("div",{key:t.id,staticClass:"installationPackageBlock"},[null!=a.installationPackageScreeningCondition.sign&&a.installationPackageScreeningCondition.sign!=t.sign||null!=a.installationPackageScreeningCondition.state&&a.installationPackageScreeningCondition.state!=t.state?a._e():e("div",{staticClass:"selectBlock"},[e("div",{staticClass:"name",on:{click:function(e){return a.openPageTagInfo(t)}}},[a._v(a._s(t.name))]),a._v(" "),e("div",{staticClass:"versions"},[a._v(a._s(t.versions))]),a._v(" "),e("div",{staticClass:"operatingState"},[a._v(a._s(t.operatingState))]),a._v(" "),e("div",{staticClass:"operationBox"},[e("div",{staticClass:"operation",class:{active:"未安装"==t.state}},[a._v("安装")]),a._v(" "),e("div",{staticClass:"operation",class:{active:"已安装"==t.state}},[a._v("卸载")]),a._v(" "),e("div",{staticClass:"operation",class:{active:"未安装"==t.state},on:{click:function(e){return a.deleteInstallationPackage(t,n)}}},[a._v("删除")]),a._v(" "),e("div",{staticClass:"operation",class:{active:"正常运行"!=t.operatingState&&"未安装"!=t.state}},[a._v("启动")]),a._v(" "),e("div",{staticClass:"operation",class:{active:"正常运行"==t.operatingState&&"未安装"!=t.state}},[a._v("停止")])]),a._v(" "),t.sign?e("div",{staticClass:"sign",on:{click:function(e){return a.sign(t,n)}}},[e("span",{staticClass:"iconfont"},[a._v("")])]):a._e(),a._v(" "),t.sign?a._e():e("div",{staticClass:"sign",on:{click:function(e){return a.sign(t,n)}}},[e("span",{staticClass:"iconfont"},[a._v("")])])])])}),0)]),a._v(" "),e("div",{staticClass:"right-box"},[e("div",{staticClass:"operatingRecord"},[a._m(1),a._v(" "),null!==a.updateNow?e("div",{staticClass:"operatingRecordBlock"},[e("div",{staticClass:"record-type"},[a._v(a._s(a.updateNow.type))]),a._v(" "),e("div",{staticClass:"record-name"},[a._v(a._s(a.updateNow.name))]),a._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"skills",style:"width:"+a.updateNow.schedule+"%"},[a._v(a._s(a.updateNow.schedule)+"%")])]),a._v(" "),e("div",{staticClass:"record-time"},[a._v(a._s(a.updateNow.time))])]):a._e(),a._v(" "),a._l(a.operatingRecord.data,function(t,n){return e("div",{key:t.id,staticClass:"operatingRecordBlock"},[e("div",{staticClass:"record-type"},[a._v(a._s(t.type))]),a._v(" "),e("div",{staticClass:"record-name"},[a._v(a._s(t.name))]),a._v(" "),e("div",{staticClass:"record-info"},[a._v(a._s(t.info))]),a._v(" "),e("div",{staticClass:"record-time"},[a._v(a._s(a.formatDate(t.time)))]),a._v(" "),e("span",{staticClass:"iconfont",on:{click:function(e){return a.deleteOperatingRecord(t,n)}}},[a._v("")])])}),a._v(" "),e("div",{staticClass:"more",on:{click:function(t){return a.getOperatingRecord()}}},[a._v("更多")])],2)]),a._v(" "),e("div",{staticClass:"configuration"},[e("div",{staticClass:"mask"}),a._v(" "),e("div",{staticClass:"pop"},[e("div",{staticClass:"poptitle"},[a._v("设置页面标签")]),a._v(" "),e("div",{staticClass:"formitem"},[e("span",[a._v("*")]),a._v(" "),e("label",[a._v("标签标码")]),a._v(" "),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.pageTagInfo.code,expression:"pageTagInfo.code"}],attrs:{placeholder:"请输入标签标识码"},domProps:{value:a.pageTagInfo.code},on:{input:function(t){t.target.composing||a.$set(a.pageTagInfo,"code",t.target.value)}}})])]),a._v(" "),e("div",{staticClass:"formitem"},[e("span",[a._v("*")]),a._v(" "),e("label",[a._v("标签标题")]),a._v(" "),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.pageTagInfo.title,expression:"pageTagInfo.title"}],attrs:{placeholder:"请输入标签标题"},domProps:{value:a.pageTagInfo.title},on:{input:function(t){t.target.composing||a.$set(a.pageTagInfo,"title",t.target.value)}}})])]),a._v(" "),e("div",{staticClass:"formitem"},[e("span",[a._v("*")]),a._v(" "),e("label",[a._v("标签路径")]),a._v(" "),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.pageTagInfo.url,expression:"pageTagInfo.url"}],attrs:{placeholder:"请输入标签路径"},domProps:{value:a.pageTagInfo.url},on:{input:function(t){t.target.composing||a.$set(a.pageTagInfo,"url",t.target.value)}}})])]),a._v(" "),e("div",{staticClass:"formitem"},[e("span",[a._v(" ")]),a._v(" "),e("label",[a._v("标签类别")]),a._v(" "),e("div",{staticClass:"inputBox",staticStyle:{"z-index":"1"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.pageTagInfo.sort,expression:"pageTagInfo.sort"}],attrs:{placeholder:"标签类别",onfocus:"document.querySelector('.formitem-select.hidden') !== null?document.querySelector('.formitem-select.hidden').classList.toggle('hidden'):'无事发生'",onblur:"document.querySelector('.formitem-select').classList.toggle('hidden')"},domProps:{value:a.pageTagInfo.sort},on:{input:function(t){t.target.composing||a.$set(a.pageTagInfo,"sort",t.target.value)}}}),a._v(" "),e("div",{staticClass:"formitem-select hidden"},a._l(a.pageTagSort.data,function(t){return e("div",{key:t.id},[e("div",{staticClass:"select",on:{mousedown:function(e){a.pageTagInfo.sort=t.sort}}},[a._v(a._s(t.sort))])])}),0)])]),a._v(" "),e("div",{staticClass:"formitem-img"},[e("span",[a._v(" ")]),a._v(" "),e("div",{staticClass:"img-title"},[a._v("上传图像")]),a._v(" "),e("div",{staticClass:"updateImgBox",class:{active:null!==a.pageTagInfo.img}},[null!==a.pageTagInfo.img?e("img",{staticClass:"preview",attrs:{src:a.pageTagInfo.img}}):a._e(),a._v(" "),null===a.pageTagInfo.img?e("label",{attrs:{for:"uploadImg"}},[a._v("上传")]):a._e(),a._v(" "),e("input",{ref:"uploadImg",staticClass:"uploadImg",attrs:{id:"uploadImg",type:"file"},on:{change:function(t){return a.pageTagInfoImgUpload(t)}}}),a._v(" "),null!==a.pageTagInfo.img?e("div",{staticClass:"clearImg-box"},[e("div",{staticClass:"clearImg",on:{click:function(t){a.pageTagInfo.img=null,a.$refs.uploadImg.value=null}}},[e("span",{staticClass:"iconfont"},[a._v("")])])]):a._e()]),a._v(" "),e("div",{staticClass:"reminder"},[a._v("图片大小请限制在1M以下")])]),a._v(" "),e("div",{staticClass:"formitem"},[e("span",[a._v(" ")]),a._v(" "),e("label",[a._v("标签描述")]),a._v(" "),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.pageTagInfo.description,expression:"pageTagInfo.description"}],attrs:{placeholder:"请输入标签描述"},domProps:{value:a.pageTagInfo.description},on:{input:function(t){t.target.composing||a.$set(a.pageTagInfo,"description",t.target.value)}}})])]),a._v(" "),e("div",{staticClass:"formitem"},[e("span",[a._v(" ")]),a._v(" "),e("label",[a._v("详细信息")]),a._v(" "),e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.pageTagInfo.information,expression:"pageTagInfo.information"}],attrs:{placeholder:"请输入标签详细信息"},domProps:{value:a.pageTagInfo.information},on:{input:function(t){t.target.composing||a.$set(a.pageTagInfo,"information",t.target.value)}}})])]),a._v(" "),e("button",{staticClass:"button-close",on:{click:a.closePageTagInfo}},[a._v("关闭")]),a._v(" "),e("button",{staticClass:"button-verify",on:{click:a.submitPageTagInfo}},[a._v("确认")])])]),a._v(" "),this.uploadLoading?e("div",{staticClass:"uploadLoading"},[e("div",{staticClass:"uploadLoading-mask"}),a._v(" "),e("loading")],1):a._e()]),a._v(" "),e("error-message",{ref:"errorMessage"})],1)},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"blogTitle"},[t("h1",{staticClass:"title"},[this._v("安装管理")])])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"operatingRecord-header"},[t("h3",[this._v("安装记录")]),this._v(" "),t("span",{staticClass:"iconfont"},[this._v("")])])}]};var r=e("VU/8")(o,l,!1,function(a){e("OZOA")},"data-v-0e646c9f",null);t.default=r.exports},OZOA:function(a,t){}});
//# sourceMappingURL=2.6083355b6e517514af4a.js.map